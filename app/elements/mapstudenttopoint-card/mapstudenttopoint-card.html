<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../mapstudenttopoint-service/mapstudenttopoint-service.html">
<link rel="import" href="../studenttopoint-item-card/studenttopoint-item-card.html">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<dom-module id="mapstudenttopoint-card">
  <template>  
  <style>
  .card{
    margin-left: 30%;
  }
  .template{
    margin-left: -5%;
  }

  </style>
    <body>
      <div >
      <div class="card">
      <table >
        <tr>
        <td style="width: 17%;"></td>
          <td>  <paper-item label="">Grade</paper-item>
          </td>
          <td>
        <div class="select-class">
          <paper-dropdown-menu label="Select Grade">
            <paper-menu class="dropdown-content" on-iron-select="classes1" attr-for-selected="value" >
              <template  is="dom-repeat" items="{{classarr}}" as="view">
                <paper-item value="{{view.school_type}}">{{view.school_type}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
          </td>
          <td>
          </td>
            </tr>
          </table>
          </div>
          <div class="template">
          <app-service studentarr="{{studentarr}}"></app-service>
            <template  is="dom-repeat" items="{{studentarr}}">
              <studenttopoint-item-card studentid="{{item.id}}" studentname="{{item.student_name}}">
            </template>
              <div class="button" style="margin-left: 80%;margin-top: 3%;">
                <paper-button raised class="custom indigo" on-click="click">Submit</paper-button>
              </div>
        </div>
        </div>
          
    </body>
    <mapstudenttopoint-service id="maps"></mapstudenttopoint-service>
  </template>
  <script>
    (function() {
      var itemarray=[];
      Polymer({
        is:"mapstudenttopoint-card",
        ready:function(){
          this.$.maps.selectclass();
        },
        classes1:function(e){
                    this.class = (e.target.selectedItem.value);
                     alert('The select grade is..'+this.class);
                     this.$.maps.classpick(this.class);
        },
        click:function()
        {
            this.$.maps.submit(itemarray);
           },
           FnGetItems:function(studentid,pickroute,droproute,pickpoint,droppoint){
            var obj={"studentid":"","pickroute":"","droproute":"","pickpoint":"","droppoint":""};
            obj.studentid=studentid;
            obj.class_id=this.class;
            obj.pickroute=pickroute;
            obj.droproute=droproute;
            obj.pickpoint=pickpoint;
            obj.droppoint=droppoint;
            itemarray.push(obj);
            alert(JSON.stringify(itemarray));
           },
      });
    })();
  </script>
</dom-module>
