<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../../query-post/query-post.html">

<dom-module id="complaint-form">
  <template>
    <style>
      :host {
        display: block;
      }
      .button{
        @apply(--layout-center);
      }
      .complaint{
        height: 700px;
      }
    </style>
    <div class="complaint">
      <div class="container">
        <div class="row">
          <div class="page-heading">
            <h1>HELPDESK</h1>
            <p>We have answers!</p>
          </div>
          <div class="field">
            <paper-input label="Student ID" value="{{student_id}}" id="student_id" allowed-pattern="[a-zA-Z0-9 ]" required error-message="need a id!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Student Name" value="{{student_name}}" id="student_name" allowed-pattern="[a-zA-Z0-9 ]" required error-message="need a name!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Class" value="{{classes}}" id="class" allowed-pattern="[a-zA-Z0-9 ]" required error-message="need class!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Parent Name" value="{{name}}" id="name" allowed-pattern="[a-zA-Z ]" required error-message="need a name!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Email" value="{{email}}" id="email" required error-message="need a e-mail ID!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Mobile" value="{{mobile}}" id="mobile" required error-message="need a mobile number!"></paper-input>
          </div>
         <!-- <div class="field">
            <paper-input label="Subject" value="{{subject}}" id="subject" required error-message="need subject!"></paper-input>
          </div>-->
          <div class="field">
            <paper-dropdown-menu label="Category">
              <paper-menu id="category" required error-message="Need a Category!" class="dropdown-content" on-iron-select="category" valueattr="value">
                <paper-listbox class="dropdown-content">

                  <paper-item value="academics"><paper-icon-button  class="category_icon" src="../../images/book_icon.png"></paper-icon-button>Academics</paper-item>
                  <paper-item value="adminstration"><paper-icon-button  class="category_icon" src="../../images/administration_icon.png"></paper-icon-button>Administration</paper-item>
                  <paper-item value="transport"><paper-icon-button  class="category_icon" src="../../images/schoolbus_icon.png"></paper-icon-button>Transport</paper-item>
                  <paper-item value="facilities"><paper-icon-button  class="category_icon" src="../../images/fecilities_icon.png"></paper-icon-button>Facilities</paper-item>
                </paper-listbox>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
          <div class="field textarea">
            <iron-autogrow-textarea value="{{complaint}}" id="complaint"  error-message="needs Complaint!" placeholder="Feedback" required ></iron-autogrow-textarea>
          </div>
          <div class="button">
            <paper-button id="button" on-click="click">Submit</paper-button>
          </div>
        </div>
      </div>
    </div>
    <query-post id='qpostid'></query-post>
  </template>
  <script>
  (function() {
    'use strict';
    var category;

    Polymer({
      is: 'complaint-form',

      ready:function(){

      },
      category:function(e){
      category=(e.target.selectedItem.textContent).trim();
      },

      click:function()
      { //alert(this.student_id+ '  '+this.name+'   '+category);
        this.$.qpostid.querypostFn(this.student_id,this.name,this.email,category,this.complaint,this.mobile);
      },
      refresh:function()
      {
        this.complaint="";
        //this.subject="";
        document.querySelector('#category').selected=-1;
      }
    });
  })();
  </script>
</dom-module>
