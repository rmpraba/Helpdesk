<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../query-post/query-post.html">

<dom-module id="complaint-form">
  <template>
    <style>
      :host {
        display: block;
      }
      .button{
        @apply(--layout-center);
      }
    </style>
    <section>
      <div class="container">
        <div class="row">
          <div class="page-heading">
            <h1>HELPDESK</h1>
            <p>We have answers!</p>
          </div>
          <div class="field">
            <paper-input label="Student ID" value="{{student_id}}" id="student_id" allowed-pattern="[a-zA-Z0-9 ]" required error-message="need a name!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Name" value="{{name}}" id="name" allowed-pattern="[a-zA-Z ]" required error-message="need a name!"></paper-input>
          </div>
          <div class="field">
            <paper-input label="Email" value="{{email}}" id="email" required error-message="need a name!"></paper-input>
          </div>
          <div class="field">
            <paper-dropdown-menu label="Category">
              <paper-menu id="category" required error-message="Need a Category!" class="dropdown-content" on-iron-select="category" valueattr="value" >
                <paper-listbox class="dropdown-content">
                  <paper-item value="academics">Academics</paper-item>
                  <paper-item value="adminstration">Adminstration</paper-item>
                  <paper-item value="transport">Transport</paper-item>
                  <paper-item value="other">Other</paper-item>
                </paper-listbox>
              </paper-menu>
            </paper-dropdown-menu>
          </div>
          <div class="field textarea">
            <iron-autogrow-textarea value="{{complaint}}" id="complaint"  error-message="needs Complaint!" placeholder="Feedback" required ></iron-autogrow-textarea>
          </div>
          <div class="button">
            <paper-button id="button" on-click="click">Submit</paper-button>
          </div>
        </div>
      </div>
    </section>
    <query-post id='qpostid'></query-post>
  </template>
  <script>
  (function() {
    'use strict';
    var category;

    Polymer({
      is: 'complaint-form',

      ready:function(){

      },
      category:function(e){
      category=(e.target.selectedItem.textContent).trim();
      },

      click:function()
      { //alert(this.student_id+ '  '+this.name+'   '+category);
        this.$.qpostid.querypostFn(this.student_id,this.name,this.email,category,this.complaint);
      }
    });
  })();
  </script>
</dom-module>
