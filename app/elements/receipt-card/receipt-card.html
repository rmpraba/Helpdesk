<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-item/paper-item.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="..\..\bower_components/paper-button/paper-button.html">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">

 <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.js"></script>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>
      <script type="text/javascript" src="http://mrrio.github.io/jsPDF/dist/jspdf.debug.js"></script>
      <script type="text/javascript" src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>



<dom-module id="receipt-card">
  <template>
      <style>
      :host {
        display: block;
      }
    </style>
    <html>
    <body id="receipt">
    <img id="imgRes" height="1px" width="1px"  />
   <div id="canvas" style="background-image:url(fimage/1.jpg)">
    <div class="receipt" >
        <div class="header">
        <div class="logo"><img src="../../images/zeesouth.png"/></div>
        <div class="heading">
          <div class="title">Mount Litera Zee School-South Bangalore</div>
          <div class="address">South Bangalore #58/4, Haralur Road, Kudlu, HSR Extension, Bangalore - 560068 Phone : 080-65468341</div>
        </div>
        </div>

        <div class="body1">
        <h1>FEE RECEIPT</h1>
          <hr></hr>
          <div class="l1">
          <paper-item class="lb">Receipt Date: </paper-item><paper-item>{{today}}</paper-item>
        </div>
        <div class="r1">
          <paper-item class="lb">Receipt No: </paper-item><paper-item>{{id}}</paper-item>
        </div>
        <hr id='ln2'></hr>
        </div>

          <div class="body2">
            <div class="l2">
              <paper-item class="lb">Student Name : </paper-item><paper-item>{{studname}}</paper-item>
              <paper-item class="lb">Father Name  : </paper-item><paper-item>{{dadname}}</paper-item>
              <paper-item class="lb">Mother Name  : </paper-item><paper-item>{{momname}}</paper-item>
            </div>
            <div class="r2">
              <paper-item class="lb">Class        : </paper-item><paper-item>{{classid}}</paper-item>
              <paper-item class="lb">Session      : </paper-item><paper-item>{{sessi}}</paper-item>
            </div>

          </div>
          <hr id="ln3"></hr>
          
          <div class="body3">
            <div class="l3">
              <h1>SL.No.</h1>
            </div>
            <div class="l13">
              <h1>Particulars</h1>
            </div>
            <div class="r3">
              <h1>Amount</h1>
            </div>
          </div>

          <hr id="ln4"></hr>

          <div class="body4">
            <div class="l4">
              <paper-item> SL.No.</paper-item>
            </div>
            <div class="l14">
              <paper-item class="lb">Transport fee({{paymentdetails}})</paper-item>
            </div>
            <div class="r4">
              <paper-item> fees{{fees}}</paper-item>
            </div>

          </div>
          <hr id="ln5"></hr>

          <div class="body5">
            <div class="l5">
              
            </div>
            <div class="l15">
              <paper-item class="lb">Transport fee Paid : Rs {{feeinword}}</paper-item>
            </div>
            <div class="r5">
              <paper-item> Total fees :{{fees}}</paper-item>
                <paper-input class="button" on-change="convertrs" value="{{totalfee}}"></paper-input>
            </div>

          </div>
          <hr id="ln6"></hr>
          <div class="body6">
            <paper-item class="lb">Mode Of Payment : {{modepay}}</paper-item>
          </div>
              
          <div class="body7">
            <div class="l7">
              <paper-item class="lb">Bank : {{bank}}</paper-item>
            </div>
            <div class="l17">
              <paper-item class="lb">Cheque No : {{chequeno}}</paper-item>
            </div>
            <div class="r7">
              <paper-item> Cheque Dated  :  {{chequedate}}</paper-item>
            </div>
</div>
            <div class="body8">
              <h3><U>TERMS AND CONDITIONS FOR FEE PAYMENTS</U></h3>
            </div>

            <div class="body9">
              <div class="l8">
              <div><p>1.  Fee to be paid by Cash / Cheque / Demand Draft only</p></div>
              <div><p>2.  Cheque / Demand Draft to be made in the name of <strong>"SAMSIDH EDUCATIONAL SOCIETY"</strong></p></div>
              <div><p>3.  In Case the cheque is not honoured by the bank, service charge of Rs.250/- will be levied and the amount has to be paid by Cash / DD.</p></div>
              <div><h4>4.  FEES ONCE PAID WILL NOT BE REFUNDED AT ANY GIVEN CIRCUMSTANCES</h4></div>
             </div> 
              
              
              
              

            
            <div class="r8">
            <p><strong>THIS IS SYSTEM GENERATED RECEIPT, NO SIGNATURE IS REQUIRED</strong></p></div>
            </div>
          
          <div>
            <paper-button class="button" id="pdf">Save as PDF</paper-button>
             <paper-button class="button" id="printreceipt" on-click="printDiv">Print the Receipt</paper-button>
          </div>

</div>
</div>
    </body>
    <div id="editor"></div>
    </html>
  </template>
  <script>

  $(window).load(function(){
$(document).ready(function() {
    $('#pdf').click(function() {       
        html2canvas($("#canvas"), {
            onrendered: function(canvas) {         
                var imgData = canvas.toDataURL('image/png'); 
                $("#imgRes").attr("src", imgData);             
                var doc = new jsPDF('p', 'mm');
                doc.addImage(imgData, 'PNG', 10, 8);
                doc.save('sample-file.pdf');
            }
        });
    });
});
});
  (function() {
    'use strict';

      var iWords=["Zero", " One", " Two", " Three", " Four", " Five", " Six", " Seven", " Eight", " Nine"];
    var ePlace=['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
    var tensPlace=['dummy', ' Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety' ];
    var junkVal;
    var obStr;
    var numReversed;
    var totalWords="";
    var inWords=new Array();
    var finalWord="";
    var i,j;
    var actnumber;

   
var specialElementHandlers = {
    '#editor': function (element, renderer) {
        return true;
    }
};



    Polymer({
      is: 'receipt-card',

      ready:function(){

      },
      convertrs:function() {
        alert('hi');
    junkVal=this.totalfee;
    junkVal=Math.floor(junkVal);
    obStr=new String(junkVal);
    numReversed=obStr.split("");
    actnumber=numReversed.reverse();
    var iWordsLength=numReversed.length;
    if(Number(junkVal) >=0){
        //do nothing
        alert("ok");
    }
    else{
        alert('wrong Number cannot be converted');
        return false;
    }
    if(Number(junkVal)==0){
        this.feeinword=obStr+''+'Rupees Zero Only';
        return false;
    }
    if(actnumber.length>9){
        alert('Oops!!!! the Number is too big to covertes');
        return false;
    }

    
    j=0;
    for(i=0; i<iWordsLength; i++){
        switch(i)
        {
        case 0:
            if(actnumber[i]==0 || actnumber[i+1]==1 ) {
                inWords[j]='';
            }
            else {
                inWords[j]=iWords[actnumber[i]];
            }
            inWords[j]=inWords[j]+' Only';
            break;
        case 1:
            tens_complication();
            break;
        case 2:
            if(actnumber[i]==0) {
                inWords[j]='';
            }
            else if(actnumber[i-1]!=0 && actnumber[i-2]!=0) {
                inWords[j]=iWords[actnumber[i]]+' Hundred and';
            }
            else {
                inWords[j]=iWords[actnumber[i]]+' Hundred';
            }
            break;
        case 3:
            if(actnumber[i]==0 || actnumber[i+1]==1) {
                inWords[j]='';
            }
            else {
                inWords[j]=iWords[actnumber[i]];
            }
            if(actnumber[i+1] != 0 || actnumber[i] > 0){
                inWords[j]=inWords[j]+" Thousand";
            }
            break;
        case 4:
            tens_complication();
            break;
        case 5:
            if(actnumber[i]==0 || actnumber[i+1]==1) {
                inWords[j]='';
            }
            else {
                inWords[j]=iWords[actnumber[i]];
            }
            if(actnumber[i+1] != 0 || actnumber[i] > 0){
                inWords[j]=inWords[j]+" Lakh";
            }
            break;
        case 6:
            tens_complication();
            break;
        case 7:
            if(actnumber[i]==0 || actnumber[i+1]==1 ){
                inWords[j]='';
            }
            else {
                inWords[j]=iWords[actnumber[i]];
            }
            inWords[j]=inWords[j]+" Crore";
            break;
        case 8:
            tens_complication();
            break;
        default:
            break;
        }
        j++;
    }

    
    inWords.reverse();
    for(i=0; i<inWords.length; i++) {
        finalWord+=inWords[i];
    }
    this.feeinword=obStr+'  '+finalWord;
    alert(finalWord);
    alert(obStr+'  '+finalWord);

},
tens_complication:function() {
        if(actnumber[i]==0) {
            inWords[j]='';
        }
        else if(actnumber[i]==1) {
            inWords[j]=ePlace[actnumber[i-1]];
        }
        else {
            inWords[j]=tensPlace[actnumber[i]];
        }
    },
    printDiv:function()
    {
      var printContents = document.getElementById('canvas').innerHTML;
     var originalContents = document.body.innerHTML;

     document.body.innerHTML = printContents;

     window.print();

     document.body.innerHTML = originalContents;
    }
   /* generatepdf:function(e){
      var doc = new jsPDF();
      alert('save as pdf');
      doc.fromHTML($('#receipt').html(), 15, 15, {
        'width': 170,'elementHandlers': specialElementHandlers});
    doc.save('sample-file.pdf');
    }*/
      
      
    });
  })();
  </script>
</dom-module>
