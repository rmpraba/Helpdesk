<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="cancellation-item-card">
  <template>
   <style>
 
 
 .detail1
 {
@apply(--layout-horizontal);
height: 40%

 }
 .collapse
 {
 padding: 10px 15px;
        margin-top: 20px;
        background-color: #B2C2F0;
        border: 1px solid #dedede;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        font-size: 15px;
        cursor: pointer;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        width: 100%;
        text-align: left;
        }
.layout
{
@apply(--layout-horizontal);
}
 .hor
 {
  margin-top: 5%;
@apply(--layout-vertical);
 }
 #lb
 {
  font-weight: bold;
  
 }
 paper-item{
  width: 150px;
 }
 </style>
 <button  class="collapse" on-click="toggle">Student Id:{{studid}}</button>
<iron-collapse id="{{studid}}" class="detail">
    <div class="layout">
      <div class="img"><img src="images/{{studid}}.jpg"/></div>
    </div>
      <div class="layout">
        <paper-item id="lb" >student Id:</paper-item> <paper-item >{{studid}}</paper-item>
        <paper-item id="lb">student name:</paper-item><paper-item >{{name}}</paper-item>
      </div>
    <div class="layout">
      <paper-item id="lb">class:</paper-item><paper-item>{{classes}}</paper-item>
      <paper-item id="lb">School Type:</paper-item><paper-item >{{school}}</paper-item>
    </div>
    <div class="layout">
      <paper-item id="lb">zone:</paper-item> <paper-item  >{{zone}}</paper-item>
      <paper-item id="lb" >Date of Birth: </paper-item><paper-item >{{dob}}</paper-item>
    </div>
    <div class="layout">
     <paper-item id="lb">Bus Fee:</paper-item><paper-item >{{fee}}</paper-item>
      <paper-item id="lb" >Paid: </paper-item><paper-item >{{paid}}</paper-item>
    </div>
    <div class="layout">
      <paper-item id="lb">Remaining Fee:</paper-item><paper-item >{{due}}</paper-item>
      <paper-item id="lb" >Pick Up Place: </paper-item><paper-item >{{pick}}</paper-item>
    </div>
    <div class="layout">
      <paper-item id="lb">Drop Place:</paper-item><paper-item >{{drop}}</paper-item>
    </div>
  <div class="layout">
    <div class="date">
      <datepicker-card></datepicker-card>
    </div>
    <div class="reason">
      <paper-textarea value="{{reason}}" label="Reason"></paper-textarea>
    </div>
  </div>
  <div class="layout">
    <div class="check-box">
      <paper-checkbox on-change="cancel" >Cancel Transport</paper-checkbox>
    </div>
    <div class="button">
      <paper-button id="button" class="button" on-click="click">Submit</paper-button>
    </div>
  </div>
  </iron-collapse>
  <transport-service id="service"></transport-service>
    <paper-dialog id="confirm">
      <h2>Confirm Cancel</h2>
      <paper-dialog-scrollable>
        <paper-item>Total months of transport :{{total_months}}</paper-item><br>
        <paper-item>Months used :{{months_used}}</paper-item><br>
        <paper-item>Refund Amount : {{refund_amount}}</paper-item>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-dismiss on-click="accept">Accept</paper-button>
      </div>
    </paper-dialog>
  </template>
  <script>
    (function() {
     var idd="0";
      Polymer({
        is: 'cancellation-item-card',
        ready:function()
        {
        
        },
        toggle: function(e){
          if(idd=="0"){
            idd= document.querySelector("#"+this.studid);
           idd.toggle()
          } else {
            if(idd!=document.querySelector("#"+this.studid)){
              idd.opened=false;
            }
            idd= document.querySelector("#"+this.studid);
            idd.toggle()
          }
        },
        cancel: function(e){
          this.$.service.cancel(this.school, this.studid);
        },
        click:function(){
          document.querySelector('#confirm').open();
        },
        accept:function(){
          this.$.service.proceedcancellation(this.studid, this.name, this.months_used,this.refund_amount,this.reason);
        }
      });
    })();
  </script>
</dom-module>
